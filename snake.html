<HTML>
<head>
<title> k </title>
</head>

<body>
<canvas id=myCanvas width=300 height=300 style="background-color: pink;"> </canvas>
<script src="Net.js"></script>
<script src="Weights.js" charset="utf-8"></script>
<script src="Block.js" charset="utf-8"></script>
<script src="Neiron.js" charset="utf-8"></script>
<script>
  var ctx = myCanvas.getContext("2d");
  var grid=[];
  for(var i=0;i<32;i++){
    grid.push([]);
    for(var i2=0;i2<32;i2++){
      grid[i].push(0);
    }
  }
  var pel={x:15,y:15};
  grid[pel.x][pel.y]=1;
  var snake=[{x:20,y:20},{x:21,y:20}];
  snake.forEach(function(a){
    grid[a.x][a.y]=-1;
  });
  var headAt=0;
  var net=new Net(3);
  net.addBlock(255,0,net.noSquish,net.noSquish,"input",true);//16x16-head
  net.addBlock(16,1,net.sigmoid,net.Isigmoid,"middle");
  net.addBlock(4,2,net.sigmoid,net.Isigmoid,"output");
  net.connect("input","middle");
  net.connect("middle","output");
  function update(){
    var inputs=[];
    for(var i=0;i<grid.length;i++){
      for(var i2=0;i2<grid[0].length;i2++){
        inputs.push(inputs[i][i2]);
      }
    }
    net.setBlock("input",inputs);
    net.forwardProp();
    var out=net.getBlockOutput("output",true);
    var bigg=0;
    for(var i=1;i<4;i++){
      if(out[i]>out[bigg]){
        bigg=i;
      }
    }
    grid[pel.x][pel.y]=1;
    snake.forEach(function(a){
      grid[a.x][a.y]=-1;
    });
    setTimeout(update,0);
  }
  update();
</script>

</body>
</html>
